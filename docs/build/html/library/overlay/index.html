
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    

    <title>6. Overlay &mdash; TROY 0.1 documentation</title>

<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>


    
    <link rel="stylesheet" href="../../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/searchtools.js"></script>
    <link rel="top" title="TROY 0.1 documentation" href="../../index.html" />
    <link rel="up" title="1. Library Reference" href="../index.html" />
    <link rel="next" title="2. Tutorial" href="../../tutorial/index.html" />
    <link rel="prev" title="5. Workload" href="../workload/index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../tutorial/index.html" title="2. Tutorial"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../workload/index.html" title="5. Workload"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">TROY 0.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">1. Library Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overlay">
<span id="id1"></span><h1>6. Overlay<a class="headerlink" href="#overlay" title="Permalink to this headline">¶</a></h1>
<p>The Troy Overlay...</p>
<dl class="class">
<dt id="troy.overlay.PilotDescription">
<em class="property">class </em><tt class="descclassname">troy.overlay.</tt><tt class="descname">PilotDescription</tt><big>(</big><em>descr={}</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">troy.utils.properties.Properties</span></tt></p>
<p>The <cite>PilotDescription</cite> class is a simple container for properties which
describe a <tt class="xref py py-class docutils literal"><span class="pre">Pilot</span></tt>, i.e. a overlay element.  <cite>PilotDescription`s are
submitted to :class:`OverlayManager</cite> instances on <cite>add_pilot</cite>, and are
internally used to create <tt class="xref py py-class docutils literal"><span class="pre">Pilot</span></tt> instances.</p>
<p>FIXME: description of supported properties goes here</p>
<dl class="method">
<dt id="troy.overlay.PilotDescription.add_callback">
<tt class="descname">add_callback</tt><big>(</big><em>key</em>, <em>cb</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.add_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>For any attribute change, the API will check if any callbacks are
registered for that attribute.  If so, those callbacks will be called
in order of registration.  This registration function will return an
id (cookie) identifying the callback &#8211; that id can be used to
remove the callback.</p>
<p>A callback is any callable python construct, and MUST accept three
arguments:</p>
<div class="highlight-python"><pre>- STRING key: the name of the attribute which changed
- ANY    val: the new value of the attribute
- ANY    obj: the object on which this attribute interface was called</pre>
</div>
<p>The &#8216;obj&#8217; can be any python object type, but is guaranteed to expose
this attribute interface.</p>
<p>The callback SHOULD return &#8216;True&#8217; or &#8216;False&#8217; &#8211; on &#8216;True&#8217;, the callback
will remain registered, and will thus be called again on the next
attribute change.  On returning &#8216;False&#8217;, the callback will be
unregistered, and will thus not be called again.  Returning nothing is
interpreted as &#8216;False&#8217;, other return values lead to undefined behavior.</p>
<p>Note that callbacks will not be called on &#8216;Final&#8217; attributes (they will
be called once as that attribute enters finality).</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.as_dict">
<tt class="descname">as_dict</tt><big>(</big><em>*pargs</em>, <em>**pkwargs</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>return a dict representation of all set attributes</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.attribute_exists">
<tt class="descname">attribute_exists</tt><big>(</big><em>*pargs</em>, <em>**pkwargs</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.attribute_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>attribute_exist (key)</p>
<p>This method will check if the given key is known and was set explicitly.
The call will also return &#8216;True&#8217; if the value for that key is &#8216;None&#8217;.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.attribute_is_readonly">
<tt class="descname">attribute_is_readonly</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.attribute_is_readonly" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will check if the given key is readonly, i.e. cannot be
&#8216;set&#8217;.  The call will also return &#8216;True&#8217; if the attribute is final</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.attribute_is_removable">
<tt class="descname">attribute_is_removable</tt><big>(</big><em>*pargs</em>, <em>**pkwargs</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.attribute_is_removable" title="Permalink to this definition">¶</a></dt>
<dd><p>attribute_is_writeable (key)</p>
<p>This method will check if the given key can be removed.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.attribute_is_vector">
<tt class="descname">attribute_is_vector</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.attribute_is_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will check if the given attribute has a vector value type.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.attribute_is_writeable">
<tt class="descname">attribute_is_writeable</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.attribute_is_writeable" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will check if the given key is writeable - i.e. not readonly.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.find_attributes">
<tt class="descname">find_attributes</tt><big>(</big><em>pattern</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.find_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to list(), but also grep for a given attribute pattern.  That
pattern is of the form &#8216;key=val&#8217;, where both &#8216;key&#8217; and &#8216;val&#8217; can contain
POSIX shell wildcards.  For non-string typed attributes, the pattern is
applied to a string serialization of the typed value, if that exists.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.get">
<tt class="descname">get</tt><big>(</big><em>key</em>, <em>default</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.get_attribute">
<tt class="descname">get_attribute</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.get_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns the value of the specified attribute.  If that
attribute does not exist, an DoesNotExist is raised.  It is not an
error to query an existing, but unset attribute though &#8211; that will
result in &#8216;None&#8217; to be returned (or the default value, if available).</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.get_property">
<tt class="descname">get_property</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.get_property" title="Permalink to this definition">¶</a></dt>
<dd><p>This is equivalent to the access via:</p>
<div class="highlight-python"><pre>self.&lt;key&gt;</pre>
</div>
<p>but will <em>not</em> invoke any registered updater methods.  This is thus safe
to use within an updater.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.get_vector_attribute">
<tt class="descname">get_vector_attribute</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.get_vector_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>See also: <tt class="xref py py-func docutils literal"><span class="pre">saga.Attributes.get_attribute()</span></tt> (key).</p>
<p>As python can handle scalar and vector types transparently, this method
is in fact not very useful.  For that reason, it maps internally to the
get_attribute method.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.has_key">
<tt class="descname">has_key</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.has_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.items">
<tt class="descname">items</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.iteritems">
<tt class="descname">iteritems</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.iteritems" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.iterkeys">
<tt class="descname">iterkeys</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.iterkeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.itervalues">
<tt class="descname">itervalues</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.itervalues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.list_attributes">
<tt class="descname">list_attributes</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.list_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>List all attributes which have been explicitly set.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.next">
<tt class="descname">next</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.popitem">
<tt class="descname">popitem</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.popitem" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.register_property">
<tt class="descname">register_property</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.register_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Any property registered by this call is eligible for callbacks, and is
also eligible for in-access updates &#8211; if a respective updater was
registered with <cite>register_property_updater</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.register_property_updater">
<tt class="descname">register_property_updater</tt><big>(</big><em>arg1</em>, <em>arg2=None</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.register_property_updater" title="Permalink to this definition">¶</a></dt>
<dd><p>For a registered property, register a callable which is invoked whenever
the property&#8217;s value is accessed.  That callable can be used to update
the property value for that access, i.e. on the fly.</p>
<p>There are two invocation modi for this call:</p>
<blockquote>
<div>self.register_property_updater (key, updater)
self.register_property_updater (     updater)</div></blockquote>
<p>In the first case, the updater will only be called on access of the
property <cite>key</cite>.  In the second case, the updater will be called on <em>any</em>
access to a registered property on the class.</p>
<p>Note that frequent property accesses can create a significant number of
updater invocations &#8211; implementers should be aware of this, and should
consider to cache values in the updater, at least for short periods of
time.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.remove_attribute">
<tt class="descname">remove_attribute</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.remove_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Removing an attribute is actually different from unsetting it, or from
setting it to &#8216;None&#8217;.  On remove, all traces of the attribute are
purged, and the key will not be listed on 
<tt class="xref py py-func docutils literal"><span class="pre">saga.Attributes.list_attributes()</span></tt> () anymore.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.remove_callback">
<tt class="descname">remove_callback</tt><big>(</big><em>key</em>, <em>id</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.remove_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>This method allows to unregister a previously registered callback, by
providing its id.  It is not an error to remove a non-existing cb, but
a valid ID MUST be provided &#8211; otherwise, a BadParameter is raised.</p>
<p>If no ID is provided (id == None), all callbacks are removed for this
attribute.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.set_attribute">
<tt class="descname">set_attribute</tt><big>(</big><em>key</em>, <em>val</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.set_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>This method sets the value of the specified attribute.  If that
attribute does not exist, DoesNotExist is raised &#8211; unless the attribute
set is marked &#8216;extensible&#8217; or &#8216;private&#8217;.  In that case, the attribute is
created and set on the fly (defaulting to mode=writeable, flavor=Scalar,
type=ANY, default=None).  A value of &#8216;None&#8217; may reset the attribute to
its default value, if such one exists (see documentation).</p>
<p>Note that this method is performing a number of checks and conversions,
to match the value type to the attribute properties (type, mode, flavor).
Those conversions are not guaranteed to yield the expected result &#8211; for
example, the conversion from &#8216;scalar&#8217; to &#8216;vector&#8217; is, for complex types,
ambiguous at best, and somewhat stupid.  The consumer of the API SHOULD
ensure correct attribute values.  The conversions are intended to
support the most trivial and simple use cases (int to string etc).
Failed conversions will result in an BadParameter exception.</p>
<p>Attempts to set a &#8216;final&#8217; attribute are silently ignored.  Attempts to
set a &#8216;readonly&#8217; attribute will result in an IncorrectState exception
being raised.</p>
<p>Note that set_attribute() will trigger callbacks, if a new value
(different from the old value) is given.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.set_property">
<tt class="descname">set_property</tt><big>(</big><em>key</em>, <em>val</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.set_property" title="Permalink to this definition">¶</a></dt>
<dd><p>This is equivalent to:</p>
<div class="highlight-python"><pre>self.&lt;key&gt; = val</pre>
</div>
<p>but will register the property on the fly, making it eligible for
callbacks etc.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.set_vector_attribute">
<tt class="descname">set_vector_attribute</tt><big>(</big><em>key</em>, <em>val</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.set_vector_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>See also: <tt class="xref py py-func docutils literal"><span class="pre">saga.Attributes.set_attribute()</span></tt> (key, val).</p>
<p>As python can handle scalar and vector types transparently, this method
is in fact not very useful.  For that reason, it maps internally to the
set_attribute method.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.setdefault">
<tt class="descname">setdefault</tt><big>(</big><em>key</em>, <em>default</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.setdefault" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.update">
<tt class="descname">update</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.PilotDescription.values">
<tt class="descname">values</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.PilotDescription.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="troy.overlay.Pilot">
<em class="property">class </em><tt class="descclassname">troy.overlay.</tt><tt class="descname">Pilot</tt><big>(</big><em>param</em>, <em>_overlay=None</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">troy.utils.properties.Properties</span></tt></p>
<dl class="method">
<dt id="troy.overlay.Pilot.cancel">
<tt class="descname">cancel</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>cancel the pilot</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.add_callback">
<tt class="descname">add_callback</tt><big>(</big><em>key</em>, <em>cb</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.add_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>For any attribute change, the API will check if any callbacks are
registered for that attribute.  If so, those callbacks will be called
in order of registration.  This registration function will return an
id (cookie) identifying the callback &#8211; that id can be used to
remove the callback.</p>
<p>A callback is any callable python construct, and MUST accept three
arguments:</p>
<div class="highlight-python"><pre>- STRING key: the name of the attribute which changed
- ANY    val: the new value of the attribute
- ANY    obj: the object on which this attribute interface was called</pre>
</div>
<p>The &#8216;obj&#8217; can be any python object type, but is guaranteed to expose
this attribute interface.</p>
<p>The callback SHOULD return &#8216;True&#8217; or &#8216;False&#8217; &#8211; on &#8216;True&#8217;, the callback
will remain registered, and will thus be called again on the next
attribute change.  On returning &#8216;False&#8217;, the callback will be
unregistered, and will thus not be called again.  Returning nothing is
interpreted as &#8216;False&#8217;, other return values lead to undefined behavior.</p>
<p>Note that callbacks will not be called on &#8216;Final&#8217; attributes (they will
be called once as that attribute enters finality).</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.as_dict">
<tt class="descname">as_dict</tt><big>(</big><em>*pargs</em>, <em>**pkwargs</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>return a dict representation of all set attributes</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.attribute_exists">
<tt class="descname">attribute_exists</tt><big>(</big><em>*pargs</em>, <em>**pkwargs</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.attribute_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>attribute_exist (key)</p>
<p>This method will check if the given key is known and was set explicitly.
The call will also return &#8216;True&#8217; if the value for that key is &#8216;None&#8217;.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.attribute_is_readonly">
<tt class="descname">attribute_is_readonly</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.attribute_is_readonly" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will check if the given key is readonly, i.e. cannot be
&#8216;set&#8217;.  The call will also return &#8216;True&#8217; if the attribute is final</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.attribute_is_removable">
<tt class="descname">attribute_is_removable</tt><big>(</big><em>*pargs</em>, <em>**pkwargs</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.attribute_is_removable" title="Permalink to this definition">¶</a></dt>
<dd><p>attribute_is_writeable (key)</p>
<p>This method will check if the given key can be removed.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.attribute_is_vector">
<tt class="descname">attribute_is_vector</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.attribute_is_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will check if the given attribute has a vector value type.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.attribute_is_writeable">
<tt class="descname">attribute_is_writeable</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.attribute_is_writeable" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will check if the given key is writeable - i.e. not readonly.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.find_attributes">
<tt class="descname">find_attributes</tt><big>(</big><em>pattern</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.find_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to list(), but also grep for a given attribute pattern.  That
pattern is of the form &#8216;key=val&#8217;, where both &#8216;key&#8217; and &#8216;val&#8217; can contain
POSIX shell wildcards.  For non-string typed attributes, the pattern is
applied to a string serialization of the typed value, if that exists.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.get">
<tt class="descname">get</tt><big>(</big><em>key</em>, <em>default</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.get_attribute">
<tt class="descname">get_attribute</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.get_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns the value of the specified attribute.  If that
attribute does not exist, an DoesNotExist is raised.  It is not an
error to query an existing, but unset attribute though &#8211; that will
result in &#8216;None&#8217; to be returned (or the default value, if available).</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.get_property">
<tt class="descname">get_property</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.get_property" title="Permalink to this definition">¶</a></dt>
<dd><p>This is equivalent to the access via:</p>
<div class="highlight-python"><pre>self.&lt;key&gt;</pre>
</div>
<p>but will <em>not</em> invoke any registered updater methods.  This is thus safe
to use within an updater.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.get_vector_attribute">
<tt class="descname">get_vector_attribute</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.get_vector_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>See also: <tt class="xref py py-func docutils literal"><span class="pre">saga.Attributes.get_attribute()</span></tt> (key).</p>
<p>As python can handle scalar and vector types transparently, this method
is in fact not very useful.  For that reason, it maps internally to the
get_attribute method.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.has_key">
<tt class="descname">has_key</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.has_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.items">
<tt class="descname">items</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.iteritems">
<tt class="descname">iteritems</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.iteritems" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.iterkeys">
<tt class="descname">iterkeys</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.iterkeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.itervalues">
<tt class="descname">itervalues</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.itervalues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.list_attributes">
<tt class="descname">list_attributes</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.list_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>List all attributes which have been explicitly set.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.next">
<tt class="descname">next</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.popitem">
<tt class="descname">popitem</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.popitem" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.register_property">
<tt class="descname">register_property</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.register_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Any property registered by this call is eligible for callbacks, and is
also eligible for in-access updates &#8211; if a respective updater was
registered with <cite>register_property_updater</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.register_property_updater">
<tt class="descname">register_property_updater</tt><big>(</big><em>arg1</em>, <em>arg2=None</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.register_property_updater" title="Permalink to this definition">¶</a></dt>
<dd><p>For a registered property, register a callable which is invoked whenever
the property&#8217;s value is accessed.  That callable can be used to update
the property value for that access, i.e. on the fly.</p>
<p>There are two invocation modi for this call:</p>
<blockquote>
<div>self.register_property_updater (key, updater)
self.register_property_updater (     updater)</div></blockquote>
<p>In the first case, the updater will only be called on access of the
property <cite>key</cite>.  In the second case, the updater will be called on <em>any</em>
access to a registered property on the class.</p>
<p>Note that frequent property accesses can create a significant number of
updater invocations &#8211; implementers should be aware of this, and should
consider to cache values in the updater, at least for short periods of
time.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.remove_attribute">
<tt class="descname">remove_attribute</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.remove_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Removing an attribute is actually different from unsetting it, or from
setting it to &#8216;None&#8217;.  On remove, all traces of the attribute are
purged, and the key will not be listed on 
<tt class="xref py py-func docutils literal"><span class="pre">saga.Attributes.list_attributes()</span></tt> () anymore.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.remove_callback">
<tt class="descname">remove_callback</tt><big>(</big><em>key</em>, <em>id</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.remove_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>This method allows to unregister a previously registered callback, by
providing its id.  It is not an error to remove a non-existing cb, but
a valid ID MUST be provided &#8211; otherwise, a BadParameter is raised.</p>
<p>If no ID is provided (id == None), all callbacks are removed for this
attribute.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.set_attribute">
<tt class="descname">set_attribute</tt><big>(</big><em>key</em>, <em>val</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.set_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>This method sets the value of the specified attribute.  If that
attribute does not exist, DoesNotExist is raised &#8211; unless the attribute
set is marked &#8216;extensible&#8217; or &#8216;private&#8217;.  In that case, the attribute is
created and set on the fly (defaulting to mode=writeable, flavor=Scalar,
type=ANY, default=None).  A value of &#8216;None&#8217; may reset the attribute to
its default value, if such one exists (see documentation).</p>
<p>Note that this method is performing a number of checks and conversions,
to match the value type to the attribute properties (type, mode, flavor).
Those conversions are not guaranteed to yield the expected result &#8211; for
example, the conversion from &#8216;scalar&#8217; to &#8216;vector&#8217; is, for complex types,
ambiguous at best, and somewhat stupid.  The consumer of the API SHOULD
ensure correct attribute values.  The conversions are intended to
support the most trivial and simple use cases (int to string etc).
Failed conversions will result in an BadParameter exception.</p>
<p>Attempts to set a &#8216;final&#8217; attribute are silently ignored.  Attempts to
set a &#8216;readonly&#8217; attribute will result in an IncorrectState exception
being raised.</p>
<p>Note that set_attribute() will trigger callbacks, if a new value
(different from the old value) is given.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.set_property">
<tt class="descname">set_property</tt><big>(</big><em>key</em>, <em>val</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.set_property" title="Permalink to this definition">¶</a></dt>
<dd><p>This is equivalent to:</p>
<div class="highlight-python"><pre>self.&lt;key&gt; = val</pre>
</div>
<p>but will register the property on the fly, making it eligible for
callbacks etc.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.set_vector_attribute">
<tt class="descname">set_vector_attribute</tt><big>(</big><em>key</em>, <em>val</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.set_vector_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>See also: <tt class="xref py py-func docutils literal"><span class="pre">saga.Attributes.set_attribute()</span></tt> (key, val).</p>
<p>As python can handle scalar and vector types transparently, this method
is in fact not very useful.  For that reason, it maps internally to the
set_attribute method.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.setdefault">
<tt class="descname">setdefault</tt><big>(</big><em>key</em>, <em>default</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.setdefault" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.update">
<tt class="descname">update</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Pilot.values">
<tt class="descname">values</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Pilot.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="troy.overlay.Overlay">
<em class="property">class </em><tt class="descclassname">troy.overlay.</tt><tt class="descname">Overlay</tt><big>(</big><em>descr={}</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">troy.utils.properties.Properties</span></tt></p>
<p>The <cite>Overlay</cite> class represents a resource overlay which is managed by Troy,
i.e. in application and user space.  It contains a set of <tt class="xref py py-class docutils literal"><span class="pre">Pilots</span></tt>, 
which represent the resource capabilities of the overlay.</p>
<p>Overlay instances are owned by the <tt class="xref py py-class docutils literal"><span class="pre">OverlayManager</span></tt> class &#8211; only
that class should change its composition and state (but Overlay may get
created by the <tt class="xref py py-class docutils literal"><span class="pre">troy.Planner</span></tt>).</p>
<p>An overlay undergoes a series of transformations before being able to run
workloads.  Those transformations are orchestrated by the overlay manager.
To support that orchestration, an overlay will be lockable, and it will have
a state attribute.  The valid states are listed below.</p>
<p>Internally, a overlay is represented by a set of <tt class="xref py py-class docutils literal"><span class="pre">troy.Pilot</span></tt>
instances.  As the overlay undergoes transformations, it is enriched by
additional information, although those are kept solely within the
<tt class="xref py py-class docutils literal"><span class="pre">Pilot</span></tt> instances &#8211; see there for more details.</p>
<p>The overlay transformations are:</p>
<ul class="simple">
<li><em>Scheduling:</em> A overlay is mapped onto resourced.</li>
<li><em>Dispatching:</em> A scheduled overlay is provisioned to the respective
resources.</li>
</ul>
<p>An overlay can be in different states, depending on the transformations
performed on it.  Specifically, it can be in <cite>DESCRIBED</cite>,
<cite>TRANSLATED</cite>, <cite>SCHEDULED</cite>, <cite>PROVISIONED</cite>, <cite>COMPLETED</cite> or <cite>FAILED</cite>.</p>
<p>A overlay enters the overlay manager in <cite>DESCRIBED</cite> state, and all follow-up
state transitions are kept within the overlay manager.</p>
<p>Those states are ill defined in case of partial transformations &#8211; if, for
example, a scheduling step may only schedule some of the pilots, but not
others.  As a general rule, a overlay will remain in a state until the
transformation has been performed on all applicable overlay components
(pilots).</p>
<p>Even on fully transformed overlay, the actual overlay state may not be
trivial to determine &#8211; for example, a specific pilot may have failed, and
my turn out to be impossible to re-run on its target resource, so it needs
to be rescheduled to a different resource.  Those feedback loops are
considered out-of-scope for Troy at this point, so that state transitions
are considered irreversible.</p>
<dl class="method">
<dt id="troy.overlay.Overlay.cancel">
<tt class="descname">cancel</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>cancel all pilots</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.add_callback">
<tt class="descname">add_callback</tt><big>(</big><em>key</em>, <em>cb</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.add_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>For any attribute change, the API will check if any callbacks are
registered for that attribute.  If so, those callbacks will be called
in order of registration.  This registration function will return an
id (cookie) identifying the callback &#8211; that id can be used to
remove the callback.</p>
<p>A callback is any callable python construct, and MUST accept three
arguments:</p>
<div class="highlight-python"><pre>- STRING key: the name of the attribute which changed
- ANY    val: the new value of the attribute
- ANY    obj: the object on which this attribute interface was called</pre>
</div>
<p>The &#8216;obj&#8217; can be any python object type, but is guaranteed to expose
this attribute interface.</p>
<p>The callback SHOULD return &#8216;True&#8217; or &#8216;False&#8217; &#8211; on &#8216;True&#8217;, the callback
will remain registered, and will thus be called again on the next
attribute change.  On returning &#8216;False&#8217;, the callback will be
unregistered, and will thus not be called again.  Returning nothing is
interpreted as &#8216;False&#8217;, other return values lead to undefined behavior.</p>
<p>Note that callbacks will not be called on &#8216;Final&#8217; attributes (they will
be called once as that attribute enters finality).</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.as_dict">
<tt class="descname">as_dict</tt><big>(</big><em>*pargs</em>, <em>**pkwargs</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>return a dict representation of all set attributes</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.attribute_exists">
<tt class="descname">attribute_exists</tt><big>(</big><em>*pargs</em>, <em>**pkwargs</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.attribute_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>attribute_exist (key)</p>
<p>This method will check if the given key is known and was set explicitly.
The call will also return &#8216;True&#8217; if the value for that key is &#8216;None&#8217;.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.attribute_is_readonly">
<tt class="descname">attribute_is_readonly</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.attribute_is_readonly" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will check if the given key is readonly, i.e. cannot be
&#8216;set&#8217;.  The call will also return &#8216;True&#8217; if the attribute is final</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.attribute_is_removable">
<tt class="descname">attribute_is_removable</tt><big>(</big><em>*pargs</em>, <em>**pkwargs</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.attribute_is_removable" title="Permalink to this definition">¶</a></dt>
<dd><p>attribute_is_writeable (key)</p>
<p>This method will check if the given key can be removed.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.attribute_is_vector">
<tt class="descname">attribute_is_vector</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.attribute_is_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will check if the given attribute has a vector value type.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.attribute_is_writeable">
<tt class="descname">attribute_is_writeable</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.attribute_is_writeable" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will check if the given key is writeable - i.e. not readonly.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.find_attributes">
<tt class="descname">find_attributes</tt><big>(</big><em>pattern</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.find_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to list(), but also grep for a given attribute pattern.  That
pattern is of the form &#8216;key=val&#8217;, where both &#8216;key&#8217; and &#8216;val&#8217; can contain
POSIX shell wildcards.  For non-string typed attributes, the pattern is
applied to a string serialization of the typed value, if that exists.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.get">
<tt class="descname">get</tt><big>(</big><em>key</em>, <em>default</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.get_attribute">
<tt class="descname">get_attribute</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.get_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns the value of the specified attribute.  If that
attribute does not exist, an DoesNotExist is raised.  It is not an
error to query an existing, but unset attribute though &#8211; that will
result in &#8216;None&#8217; to be returned (or the default value, if available).</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.get_property">
<tt class="descname">get_property</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.get_property" title="Permalink to this definition">¶</a></dt>
<dd><p>This is equivalent to the access via:</p>
<div class="highlight-python"><pre>self.&lt;key&gt;</pre>
</div>
<p>but will <em>not</em> invoke any registered updater methods.  This is thus safe
to use within an updater.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.get_vector_attribute">
<tt class="descname">get_vector_attribute</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.get_vector_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>See also: <tt class="xref py py-func docutils literal"><span class="pre">saga.Attributes.get_attribute()</span></tt> (key).</p>
<p>As python can handle scalar and vector types transparently, this method
is in fact not very useful.  For that reason, it maps internally to the
get_attribute method.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.has_key">
<tt class="descname">has_key</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.has_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.items">
<tt class="descname">items</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.iteritems">
<tt class="descname">iteritems</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.iteritems" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.iterkeys">
<tt class="descname">iterkeys</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.iterkeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.itervalues">
<tt class="descname">itervalues</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.itervalues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.list_attributes">
<tt class="descname">list_attributes</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.list_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>List all attributes which have been explicitly set.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.lock">
<tt class="descname">lock</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.lock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.locked">
<tt class="descname">locked</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.locked" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.next">
<tt class="descname">next</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.popitem">
<tt class="descname">popitem</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.popitem" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.register_property">
<tt class="descname">register_property</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.register_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Any property registered by this call is eligible for callbacks, and is
also eligible for in-access updates &#8211; if a respective updater was
registered with <cite>register_property_updater</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.register_property_updater">
<tt class="descname">register_property_updater</tt><big>(</big><em>arg1</em>, <em>arg2=None</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.register_property_updater" title="Permalink to this definition">¶</a></dt>
<dd><p>For a registered property, register a callable which is invoked whenever
the property&#8217;s value is accessed.  That callable can be used to update
the property value for that access, i.e. on the fly.</p>
<p>There are two invocation modi for this call:</p>
<blockquote>
<div>self.register_property_updater (key, updater)
self.register_property_updater (     updater)</div></blockquote>
<p>In the first case, the updater will only be called on access of the
property <cite>key</cite>.  In the second case, the updater will be called on <em>any</em>
access to a registered property on the class.</p>
<p>Note that frequent property accesses can create a significant number of
updater invocations &#8211; implementers should be aware of this, and should
consider to cache values in the updater, at least for short periods of
time.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.remove_attribute">
<tt class="descname">remove_attribute</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.remove_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Removing an attribute is actually different from unsetting it, or from
setting it to &#8216;None&#8217;.  On remove, all traces of the attribute are
purged, and the key will not be listed on 
<tt class="xref py py-func docutils literal"><span class="pre">saga.Attributes.list_attributes()</span></tt> () anymore.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.remove_callback">
<tt class="descname">remove_callback</tt><big>(</big><em>key</em>, <em>id</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.remove_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>This method allows to unregister a previously registered callback, by
providing its id.  It is not an error to remove a non-existing cb, but
a valid ID MUST be provided &#8211; otherwise, a BadParameter is raised.</p>
<p>If no ID is provided (id == None), all callbacks are removed for this
attribute.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.set_attribute">
<tt class="descname">set_attribute</tt><big>(</big><em>key</em>, <em>val</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.set_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>This method sets the value of the specified attribute.  If that
attribute does not exist, DoesNotExist is raised &#8211; unless the attribute
set is marked &#8216;extensible&#8217; or &#8216;private&#8217;.  In that case, the attribute is
created and set on the fly (defaulting to mode=writeable, flavor=Scalar,
type=ANY, default=None).  A value of &#8216;None&#8217; may reset the attribute to
its default value, if such one exists (see documentation).</p>
<p>Note that this method is performing a number of checks and conversions,
to match the value type to the attribute properties (type, mode, flavor).
Those conversions are not guaranteed to yield the expected result &#8211; for
example, the conversion from &#8216;scalar&#8217; to &#8216;vector&#8217; is, for complex types,
ambiguous at best, and somewhat stupid.  The consumer of the API SHOULD
ensure correct attribute values.  The conversions are intended to
support the most trivial and simple use cases (int to string etc).
Failed conversions will result in an BadParameter exception.</p>
<p>Attempts to set a &#8216;final&#8217; attribute are silently ignored.  Attempts to
set a &#8216;readonly&#8217; attribute will result in an IncorrectState exception
being raised.</p>
<p>Note that set_attribute() will trigger callbacks, if a new value
(different from the old value) is given.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.set_property">
<tt class="descname">set_property</tt><big>(</big><em>key</em>, <em>val</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.set_property" title="Permalink to this definition">¶</a></dt>
<dd><p>This is equivalent to:</p>
<div class="highlight-python"><pre>self.&lt;key&gt; = val</pre>
</div>
<p>but will register the property on the fly, making it eligible for
callbacks etc.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.set_vector_attribute">
<tt class="descname">set_vector_attribute</tt><big>(</big><em>key</em>, <em>val</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.set_vector_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>See also: <tt class="xref py py-func docutils literal"><span class="pre">saga.Attributes.set_attribute()</span></tt> (key, val).</p>
<p>As python can handle scalar and vector types transparently, this method
is in fact not very useful.  For that reason, it maps internally to the
set_attribute method.</p>
</dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.setdefault">
<tt class="descname">setdefault</tt><big>(</big><em>key</em>, <em>default</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.setdefault" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.unlock">
<tt class="descname">unlock</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.unlock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.update">
<tt class="descname">update</tt><big>(</big><em>other</em><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="troy.overlay.Overlay.values">
<tt class="descname">values</tt><big>(</big><big>)</big><a class="headerlink" href="#troy.overlay.Overlay.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../workload/index.html"
                        title="previous chapter">5. Workload</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../tutorial/index.html"
                        title="next chapter">2. Tutorial</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/library/overlay/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../tutorial/index.html" title="2. Tutorial"
             >next</a> |</li>
        <li class="right" >
          <a href="../workload/index.html" title="5. Workload"
             >previous</a> |</li>
        <li><a href="../../index.html">TROY 0.1 documentation</a> &raquo;</li>
          <li><a href="../index.html" >1. Library Reference</a> &raquo;</li> 
      </ul>
    </div>
<div class="footer">
    &copy; Copyright 2012, The SAGA Project.
  Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
  <br />Theme based on <a href="http://readthedocs.org/">Read The Docs</a>

</div>





  </body>
</html>